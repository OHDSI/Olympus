<div>
   	#set ( $current = "config" )
	#parse( "common/navbar.vm" )
	#renderNavBar ($current )
    <div class="container" id="main-launcher">
        <div class="row row-top">
        #if(${errorMsg})
        <div class="alert alert-danger" role="alert">$errorMsg</div>
        #end
        #if(${msg})
        <div class="alert alert-success" role="alert">$msg</div>
        #end
        #if(${webapi})
        <div class="container">
			<form method="POST" action="/webapi/request-start" id="frmLaunchWebApi">
				<div class="form-group pull-right">
					<input type="hidden" name="$_csrf.parameterName" value="$_csrf.token"/>
			        <button type="submit" id="btnLaunchWebApi" class="btn btn-success">Launch WebApi</button>
			    </div>
			</form>
		</div>
        #end
            <form class="form-horizontal" target="_self" enctype="application/x-www-form-urlencoded" action="/webapi/config" method="post">
               #springBind("config")
               
               #springBind("config.cdmDialect")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmJdbc" class="col-sm-3 control-label">CDM DataSource Dialect</label>
                    <div class="col-sm-9">
                    	#springFormSingleSelect("config.cdmDialect", $config.dialectOptions)
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                
               #* springBind("config.jdbcDriverClassName")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmJdbcDriverClassName" class="col-sm-3 control-label">CDM JDBC Driver Class Name</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.jdbcDriverClassName" "class='form-control' placeholder='e.g. com.microsoft.sqlserver.jdbc.SQLServerDriver' required maxlength='100'")
						#springShowErrors("<br/>" "")
                    </div>
                </div>
                *#
                
                #springBind("config.jdbcIpAddress")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmJdbc" class="col-sm-3 control-label">CDM DataSource IP Address</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.jdbcIpAddress" "class='form-control'")
						#springShowErrors("<br/>" "")
                    </div>
                </div>
				#springBind("config.jdbcPort")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmJdbc" class="col-sm-3 control-label">CDM DataSource Port</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.jdbcPort" "class='form-control'")
						#springShowErrors("<br/>" "")
                    </div>
                </div>            
				#springBind("config.cdmDataSourceSid")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmJdbc" class="col-sm-3 control-label">CDM DataSource SID/Service Name</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.cdmDataSourceSid" "class='form-control'")
						#springShowErrors("<br/>" "")
                    </div>
                </div>      
                #springBind("config.jdbcUser")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmUsername" class="col-sm-3 control-label">CDM Username</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.jdbcUser" 'class="form-control" placeholder="Username" required')
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.jdbcPass")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmPassword" class="col-sm-3 control-label">CDM Password</label>
                    <div class="col-sm-9">
                    	#springFormPasswordInput("config.jdbcPass" 'class="form-control" placeholder="Password"')
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                
                #springBind("config.cdmSchema")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmSchema" class="col-sm-3 control-label">CDM Schema</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.cdmSchema" 'class="form-control" placeholder="CDM schema"')
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.ohdsiSchema")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmResultsSchema" class="col-sm-3 control-label">CDM Results Schema</label>
                    <div class="col-sm-9">
                        #springFormInput("config.ohdsiSchema" 'class="form-control" placeholder="Ohdsi/Results Schema"')
                        #springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.cohortSchema")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="cdmCohortSchema" class="col-sm-3 control-label">CDM Cohort Schema</label>
                    <div class="col-sm-9">
                        #springFormInput("config.cohortSchema" 'class="form-control" placeholder="Cohort Schema"')
                        #springShowErrors("<br/>" "")
                    </div>
                </div>
<div>
<a class="btn btn-primary btn-xs" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
  Advanced config
</a>
<div class="collapse" id="collapseExample">
  <div class="well">
                                
                #springBind("config.flywayDataSourceSid")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="flywayJdbc" class="col-sm-3 control-label">CDM Flyway DataSource SID/Service Name</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.flywayDataSourceSid" "class='form-control'")
						#springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.flywayJdbcUser")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="flywayJdbcUsername" class="col-sm-3 control-label">CDM Flyway Jdbc Username</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.flywayJdbcUser" "class='form-control'")
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.flywayJdbcPass")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="flywayJdbcPassword" class="col-sm-3 control-label">CDM Flyway Jdbc Password</label>
                    <div class="col-sm-9">
                    	#springFormPasswordInput("config.flywayJdbcPass" "class='form-control'")
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
                #springBind("config.flywaySchemas")
                <div class="form-group #if(${status.error})has-error#end">
                    <label for="flywaySchemas" class="col-sm-3 control-label">CDM Flyway Schemas (case sensitive)</label>
                    <div class="col-sm-9">
                    	#springFormInput("config.flywaySchemas" 'class="form-control" placeholder="Flyway Schemas"')
                    	#springShowErrors("<br/>" "")
                    </div>
                </div>
  </div>
</div>  
</div>              
                <div class="form-group pull-right">
                	<input type="hidden" name="$_csrf.parameterName" value="$_csrf.token"/>
                    <button id="submitButton" class="btn btn-success" type="submit">Submit Properties</button>
                </div>
            </form>
        </div>
    </div>
</div>